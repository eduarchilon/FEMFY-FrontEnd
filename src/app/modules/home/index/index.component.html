<div class="bg-[#FEA8B1] px-[3vw]">
  <div class="w-[100%] bg-cover bg-[#FEA8B1] pt-24 py-[100px] max-w-[1280px] m-auto">
    <div
      class="flex items-stretch mt-10 gap-10 h-fit max-lg:flex-col max-lg:items-center max-lg:gap-[40px] min-h-[650px]">
      <div class="max-lg:w-[70%] flex flex-col gap-[30px] bg-[#FACAEC]  pb-[35px] rounded-[20px] shadow-xl">

        <h5
          class="border-b-[4px] border-[#AF6FE8] p-[20px] flex items-center justify-between text-[#AF6FE8] rounded-t-[20px] font-semibold text-[20px]">
          Ciclo actual
          <ng-container *ngIf="cycles.length > 0">
            <div class="flex justify-end w-fit">
              <button mat-icon-button [matMenuTriggerFor]="menu">
                <mat-icon>more_vert</mat-icon>
              </button>
              <mat-menu #menu="matMenu">
                <button mat-menu-item (click)="editActualCycle(cyclesWithEndNull[0])">
                  <mat-icon color="primary">edit_road</mat-icon>
                  <span>Editar días de sangrado</span>
                </button>
                <div class="w-[100%] px-2">
                  <mat-divider></mat-divider>
                </div>
                <button mat-menu-item (click)="deleteActualCycle(cyclesWithEndNull[0])">
                  <mat-icon color="warn">delete</mat-icon>
                  <span>Eliminar ciclo</span>
                </button>
              </mat-menu>
            </div>
          </ng-container>
        </h5>


        <div class="flex px-[32px] items-center justify-center w-[100%]">
          <div class="flex flex-col  items-center text-[#AF6FE8]">
            <span class="text-center">Hoy es </span>
            <span class="text-center font-bold text-[30px]">
              {{ fechaFormateada }}</span>
          </div>

        </div>
        <ng-container *ngIf="cycles.length > 0">
          <div class="flex justify-between w-[100%] px-[10px] items-center">
            <div class="flex gap-2 items-center">
              <div class="w-[20px] h-[20px] bg-[red] rounded-lg"></div>
              Día de ciclo
            </div>
            <div class="flex gap-2 items-center">
              <div class="w-[20px] h-[20px] bg-[green] rounded-lg"></div>
              Día de ovulación
            </div>
            <div class="flex gap-2 items-center">
              <div class="w-[20px] h-[20px] bg-[#000000] rounded-lg"></div>
              Fin del ciclo
            </div>
          </div>
        </ng-container>
        <div class="flex px-[32px] flex-col items-center gap-[10px]">
          <div class="rounded-full bg-white mb-5">
            <ng-container *ngIf="
                (averageQuestionCycleContent.length && cycles.length) ||
                cyclesWithOutEndNull.length ||
                cyclesWithEndNull.length
              ">
              <app-pie-chart [cyclesWithEndNull]="cyclesWithEndNull" [cycles]="cycles"
                [averageQuestionCycleContent]="averageQuestionCycleContent"
                [cyclesWithOutEndNull]="cyclesWithOutEndNull"></app-pie-chart>
            </ng-container>
            <ng-container *ngIf="cycles.length === 0">
              <div class="bg-pink-900 flex justify-center items-center rounded-full py-20">
                <h5 class="text-center max-w-[200px]">
                  No hay datos de ciclo registrado
                </h5>
              </div>
            </ng-container>
          </div>
          <ng-container>
            <button class="bg-[#AF6FE8] py-[10px] px-[20px] rounded-[20px]"
              (click)="openCicleRegister(cyclesWithEndNull[0])">
              Registrar nuevo ciclo
            </button>
          </ng-container>
          <ng-container *ngIf="cycles.length > 0">
            <button class="bg-[red] py-[10px] px-[20px] rounded-[20px]"
              (click)="finishActualCicle(cyclesWithEndNull[0])">
              Finalizar ciclo actual
            </button>
          </ng-container>
        </div>
      </div>
      <div class="w-[70%] flex flex-col justify-between h-100 gap-[20px] max-lg:w-[100%]">
        <div class="flex gap-10 w-[100%] text-black max-lg:flex-col h-[100%]">
          <div class="flex gap-10 w-[100%] text-black max-lg:flex-col">
            <div class="bg-[#FACAEC] rounded-[20px] w-[50%] max-lg:w-[100%]">
              <h5
                class="border-b-[4px] py-[29px] px-[20px] border-[#AF6FE8] text-[#AF6FE8] rounded-t-[20px] font-semibold text-[20px]">
                Historial de ciclos
              </h5>
              <div class="p-[20px] flex text-black flex-col gap-[15px]">
                <ng-container *ngIf="cycles.length === 0">
                  <h5>Todavía no existen datos cargados.</h5>
                </ng-container>
                <ng-container *ngIf="cycles.length > 0">
                  <app-cicle-historial class="text-black" [cycles]="cycles"></app-cicle-historial>
                </ng-container>
              </div>
            </div>
            <div class="bg-[#FACAEC] rounded-[20px] w-[50%] max-lg:w-[100%]">
              <h5
                class="border-b-[4px] border-[#AF6FE8] p-[20px] flex items-center justify-between text-[#AF6FE8] rounded-t-[20px] font-semibold text-[20px]">
                Recomendaciones

                <div class="flex justify-end w-fit">
                  <button mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon>more_vert</mat-icon>
                  </button>
                  <mat-menu #menu="matMenu">
                    <button routerLink="information" mat-menu-item (click)="editRecomendation.show()">
                      <mat-icon color="primary">edit_road</mat-icon>
                      <span>Editá tus recomendaciones</span>
                    </button>
                  </mat-menu>
                </div>
                <!--<span routerLink="historial" #editRecomendation="matTooltip" (click)="editRecomendation.show()"
                  matTooltip="Editá tus recomendaciones" class="material-icons cursor-pointer">edit</span>-->
              </h5>
              <div class="p-[10px] list-disc">
                <app-recomendations></app-recomendations>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>